var JSLOADTIME=(new Date).getTime(),ConfigManager=TrustevV2||{BaseUrl:"https://app.trustev.com/api/v2.0",PublicKey:"",BaseHost:"app.trustev.com",CdnUrl:"https://cdn.trustev.com",CookieName:"tuid",ConsoleLoggingEnabled:!1},TrustevLogger=TrustevLogger||{LogMessage:function(e){if(ConfigManager.ConsoleLoggingEnabled){var r=(new Date).getTime()-JSLOADTIME;console.log(r+"ms : "+e)}}},TrustevV2=TrustevV2||function(){var n="",a="",i={},s="https://app.trustev.com/api/v2.0",o=!0,c={},g="",t=function(){if(""===g){for(var e=document.getElementsByTagName("script"),r=null,t=0;t<e.length;++t)if(null!==(o=e[t])&&null!==o.getAttribute("src")&&-1<o.getAttribute("src").toLowerCase().indexOf("api/v2.0/trustevjs")){r=e[t];break}if(null!==r){var a=r.src.replace(/^[^\?]+\??/,"");g=function(e){var r=new Object;if(!e)return r;for(var t=e.split(/[;&]/),a=0;a<t.length;a++){var o=t[a].split("=");if(o&&2==o.length){var n=unescape(o[0]),i=unescape(o[1]);i=i.replace(/\+/g," "),r[n]=i}}return r}(a)}}var o;return g},u=function(e){for(var r=e+"=",t=document.cookie.split(";"),a=0;a<t.length;a++){for(var o=t[a];" "==o.charAt(0);)o=o.substring(1);if(0==o.indexOf(r))return o.substring(r.length,o.length)}return""},l=function(e,r,t){var a="";if(0<t){var o=new Date;o.setTime(o.getTime()+60*t*1e3);a="expires="+o.toUTCString()}document.cookie=e+"="+r+";"+a+"secure;path=/"},d=function(){var e=navigator.cookieEnabled;return e||(document.cookie="testcookie",e=-1!=document.cookie.indexOf("testcookie")),e};return{BaseUrl:s,Init:function(e,r){if(ConfigManager.PublicKey=e,d()&&function e(){null!==document.body?(EvercookieManager.Init([QuickStorageManager,IFrameStorageManager],TrustevApiClient),EvercookieManager.GatherEvercookiesAndSendToApi(ConfigManager.CookieName,function(e){TrustevLogger.LogMessage("Finished getting evercookies : "+JSON.stringify(e)),EvercookieManager.SetMostAccurateEvercookie(ConfigManager.CookieName,e)})):setTimeout(e,1)}(),"NotSet"==(n=TrustevV2.GetCookie("tsid-"+ConfigManager.PublicKey))||""==n)TrustevLogger.LogMessage("TrustevV2-Init : No sessionId found so calling /session endpoint"),TrustevApiClient.CallAPI("POST",s+"/session","{}",function(){try{n=JSON.parse(this.responseText).SessionId,a=n}catch(e){TrustevLogger.LogMessage("TrustevV2-Init : Error on calling the session endpoint: "+e)}if("NotSet"!=n&&""!=n&&TrustevV2.SetCookie("tsid-"+ConfigManager.PublicKey,n,20),EvercookieManager.SetSessionId(n),TrustevV2.SessionId=n,TrustevV2.AsyncGatherInformation(),d()){var e=TrustevV2.GetCookie("jsConfig-"+ConfigManager.PublicKey);TrustevV2.ExecuteExternalServices(e)}else TrustevV2.ExecuteExternalServices();r.apply(this,[n])});else{if(TrustevLogger.LogMessage("TrustevV2-Init : Existing sessionId found : "+n),TrustevV2.SessionId=n,TrustevV2.AsyncGatherInformation(),d()){var t=TrustevV2.GetCookie("jsConfig-"+ConfigManager.PublicKey);TrustevV2.ExecuteExternalServices(t)}else TrustevV2.ExecuteExternalServices();EvercookieManager.SetSessionId(n),r.apply(this,[n])}},ExecuteExternalServices:function(e){if(e){var r=JSON.parse(e);if(null!=r.configuration.javascript.deviceId&&!0===r.configuration.javascript.deviceId.enabled&&TrustevV2.InitIovation(),null!=r.configuration.javascript.locationServices&&!0===r.configuration.javascript.locationServices.enabled)try{TrustevV2.AsyncGatherLocationInfo(r.configuration.javascript.locationServices.evURL)}catch(e){TrustevLogger.LogMessage("TrustevV2.ExecuteExternalServices: Error on TrustevV2.AsyncGatherLocationInfo: "+e)}null!=r.configuration.javascript.passiveAuth&&!0===r.configuration.javascript.passiveAuth.enabled&&TrustevV2.PassiveAuthComplete(r.configuration.javascript.passiveAuth.passiveAuthURL)}else TrustevApiClient.CallAPI("GET",s+"/configuration/javascript?sessionId="+n,"{}",function(){try{var e=JSON.parse(this.responseText);d()&&TrustevV2.SetCookie("jsConfig-"+ConfigManager.PublicKey,JSON.stringify(e),5),TrustevV2.ExecuteExternalServices(JSON.stringify(e))}catch(e){TrustevLogger.LogMessage("TrustevV2.ExecuteExternalServices: Error on calling the configuration/javascript endpoint: "+e)}})},IOBlackBox:[],InitIovation:function(){setTimeout(function(){TrustevLogger.LogMessage("TrustevV2-InitIovation : Timing out black box sending after 5 seconds"),o=!1},5e3),window.io_global_object_name="IGLOO",window.IGLOO=window.IGLOO||{enable_flash:!1,bb_callback:function(e,r){var t={blackBox:e,complete:r};TrustevV2.IOBlackBox.push(t);var a={};a.sessionId=n,a.IsComplete=r,a.blackBox=e,o?(TrustevApiClient.CallAPI("PUT",s+"/ExtendedDevice",JSON.stringify(a),function(){TrustevLogger.LogMessage("TrustevV2-InitIovation : Successfully sent blackbox")}),r&&(o=!1)):TrustevLogger.LogMessage("TrustevV2-InitIovation : Not sending black box")},loader:{fp_static:!1,subkey:"nLdMddw0jvDUZG3ETn8y0CEt7ZECk8Jm4N-uQ7wPu0k",version:"early5"}},function e(){function r(r,t){var a,o={};for(a=r.length-1;-1<a;a--)0<a?o[a]=function(){var e=a;return function(){return n(r[e],o[e+1],t)}}():n(r[a],o[a+1],t)}function n(e,r,t){var a,o=document.createElement("script"),n=e[0].split("?")[0].split("/");a=n[n.length-1].split(".")[0],n=y[t]&&y[t].staticVer&&y[t].staticVer+"/"||e[1],/([0-9]+\.){2}[0-9]+\//.test(e[1])&&n!==e[1]&&i("loader: Overriding configured version with staticVer."),e[0]=e[0].replace("##version##",n),o.setAttribute("src",e[0]),o&&o.addEventListener?o.addEventListener("error",function(){E[t+"_"+a+"_load_failure"]="true"}):o.attachEvent&&o.attachEvent("onerror",function(){E[t+"_"+a+"_load_failure"]="true"}),r&&(o.onload=r),document.getElementsByTagName("head")[0].appendChild(o)}function i(e){if("function"==typeof y.trace_handler)try{y.trace_handler(e)}catch(e){}}function t(e,r){var t=null!=e;return!(!t||"1"!==e.toString()&&"true"!==e.toString().toLowerCase())||(!t||"0"!==e.toString()&&"false"!==e.toString().toLowerCase())&&("boolean"==typeof r&&r)}var a,o,s,c,g,u,l,d,v,f,p,b,S,h,L,M,T=window,m=T.io_global_object_name||"IGLOO",y=T[m]=T[m]||{},E=y.loader=y.loader||{},I=[],k=[];if(E.loaderMain)return i("loader: Loader script has already run, try reducing the number of places it's being included."),!1;E.loaderMain=e,E.loaderVer="5.1.0",c=t(E.tp,!0),g=t(E.fp_static,!0),u=t(E.fp_dyn,!0),l=t(E.enable_legacy_compatibility),d=t(E.tp_split),v=E.tp_host&&E.tp_host.replace(/\/+$/,"")||"https://mpsnare.iesnare.com",f=E.fp_static_override_uri,p=void 0!==E.uri_hook?E.uri_hook+"/":"/iojs/",b=(E.version||"versionOrAliasIsRequired")+"/",S=E.subkey?T.encodeURIComponent(E.subkey)+"/":"",h=E.tp_resource||"wdp.js",L=E.tp_host?"&tp_host="+T.encodeURIComponent(E.tp_host):"",M=f?"&fp_static_uri="+T.encodeURIComponent(f):"",E.tp_host=v,a=t(y.enable_flash,!0),o=y.io&&y.io.enable_flash,s=y.fp&&y.fp.enable_flash,o=null!=o?t(o,!0):a,null!=s?s=t(s,!0):o=a,a=o?"&flash=true":"&flash=false",s=s?"&flash=true":"&flash=false",L="?loaderVer="+E.loaderVer+"&compat="+l+"&tp="+c+"&tp_split="+d+L+"&fp_static="+g+"&fp_dyn="+u+M,c||g||i("loader: Not currently configured to load fp_static or tp script(s)."),y.fp&&y.fp.staticVer&&y.fp.staticVer+"/"!==b&&(b=y.fp.staticVer+"/",i("loader: Configured version replaced with that from pre-loaded static script.")),g||y.fp&&y.fp.staticMain?(p=(p+"##version##"+S).replace(/\/\//g,"/"),g&&(y.fp&&y.fp.staticMain?l&&!y.fp.preCompatMain&&i("loader: enable_legacy_compatibility on, but included static does not have the compat wrapper."):f?I.push([f,""]):I.push([p+"static_wdp.js"+L+s,b])),!u||y.fp&&y.fp.dynMain?y.fp&&y.fp.dynMain&&i("loader: First party dynamic script has already been loaded, disable fp_dyn or make sure you're not manually including the dynamic file separately."):I.push([p+"dyn_wdp.js"+L+s,b])):t(E.fp_dyn)&&i("loader: Invalid Config, first party dynamic script set to load without static."),c&&(y.io&&y.io.staticMain?i("loader: Third party script has already been loaded."):(p=v+"/##version##"+S,d?(k.push([p+"static_wdp.js"+L+a,b]),k.push([p+"dyn_wdp.js"+L+a,b]),E.tp_resource&&i("loader: Invalid Config: both tp_resource and tp_split set. Ignoring tp_resource.")):k.push([p+h+L+a,b]))),r(I,"fp"),r(k,"io")}()},SetCookie:l,GetCookie:u,AsyncGatherInformation:function(){"NotSet"!=n&&""!=n&&setTimeout(function(){TrustevV2.GatherInformation()},0)},AsyncGatherLocationInfo:function(e){setTimeout(function(){TrustevV2.LocationServices.CallEvUrl(e),TrustevV2.LocationServices.GetHtml5Location()},0)},GatherInformation:function(a){TrustevApiClient.CallAPI("POST",s+"/Session/"+n+"/detail","{}",function(){}),i.SessionId=n,i.DeviceId=n;try{i["c5d1c702-f8bb-e311-be87-089e010f73f9"]=null!=navigator.buildID?navigator.buildID:"undefined"}catch(e){TrustevLogger.LogMessage("Error in JavascriptData.NavigatorBuildID error: "+e)}try{i["c6d1c702-f8bb-e311-be87-089e010f73f9"]=null!=navigator.platform?navigator.platform:"undefined"}catch(e){TrustevLogger.LogMessage("Error in JavascriptData.NavigatorPlatform error: "+e)}try{i["c7d1c702-f8bb-e311-be87-089e010f73f9"]=null!=navigator.appCodeName?navigator.appCodeName:"undefined"}catch(e){TrustevLogger.LogMessage("Error in JavascriptData.NavigatorAppCodeName error: "+e)}try{i["c8d1c702-f8bb-e311-be87-089e010f73f9"]=null!=navigator.appVersion?navigator.appVersion:"undefined"}catch(e){TrustevLogger.LogMessage("Error in JavascriptData.NavigatorAppVersion error: "+e)}try{i["c9d1c702-f8bb-e311-be87-089e010f73f9"]=null!=navigator.appMinorVersion?navigator.appMinorVersion:"undefined"}catch(e){TrustevLogger.LogMessage("Error in JavascriptData.NavigatorAppMinorVersion error: "+e)}try{i["cbd1c702-f8bb-e311-be87-089e010f73f9"]=null!=navigator.cpuClass?navigator.cpuClass:"undefined"}catch(e){TrustevLogger.LogMessage("Error in JavascriptData.NavigatorCpuClass error: "+e)}try{i["ccd1c702-f8bb-e311-be87-089e010f73f9"]=null!=navigator.oscpu?navigator.oscpu:"undefined"}catch(e){TrustevLogger.LogMessage("Error in JavascriptData.NavigatorOscpu error: "+e)}try{i["cdd1c702-f8bb-e311-be87-089e010f73f9"]=null!=navigator.product?navigator.product:"undefined"}catch(e){TrustevLogger.LogMessage("Error in JavascriptData.NavigatorProduct error: "+e)}try{i["ced1c702-f8bb-e311-be87-089e010f73f9"]=null!=navigator.productSub?navigator.productSub:"undefined"}catch(e){TrustevLogger.LogMessage("Error in JavascriptData.NavigatorProductSub error: "+e)}try{i["cfd1c702-f8bb-e311-be87-089e010f73f9"]=null!=navigator.vendor?navigator.vendor:"undefined"}catch(e){TrustevLogger.LogMessage("Error in JavascriptData.NavigatorVendor error: "+e)}try{i["d0d1c702-f8bb-e311-be87-089e010f73f9"]=null!=navigator.vendorSub?navigator.vendorSub:"undefined"}catch(e){TrustevLogger.LogMessage("Error in JavascriptData.NavigatorVendorSub error: "+e)}try{i["d1d1c702-f8bb-e311-be87-089e010f73f9"]=null!=navigator.language?navigator.language:"undefined"}catch(e){TrustevLogger.LogMessage("Error in JavascriptData.NavigatorLanguage error: "+e)}try{i["d2d1c702-f8bb-e311-be87-089e010f73f9"]=null!=navigator.userLanguage?navigator.userLanguage:"undefined"}catch(e){TrustevLogger.LogMessage("Error in JavascriptData.NavigatorUserLanguage error: "+e)}try{i["d3d1c702-f8bb-e311-be87-089e010f73f9"]=null!=navigator.browserLanguage?navigator.browserLanguage:"undefined"}catch(e){TrustevLogger.LogMessage("Error in JavascriptData.NavigatorBrowserLanguage error: "+e)}try{i["d4d1c702-f8bb-e311-be87-089e010f73f9"]=null!=navigator.systemLanguage?navigator.systemLanguage:"undefined"}catch(e){TrustevLogger.LogMessage("Error in JavascriptData.NavigatorSystemLanguage error: "+e)}try{i["d5d1c702-f8bb-e311-be87-089e010f73f9"]=null!=navigator.doNotTrack?navigator.doNotTrack:"undefined"}catch(e){TrustevLogger.LogMessage("Error in JavascriptData.NavigatorDoNotTrack error: "+e)}try{i["d6d1c702-f8bb-e311-be87-089e010f73f9"]=null!=navigator.msDoNotTrack?navigator.msDoNotTrack:"undefined"}catch(e){TrustevLogger.LogMessage("Error in JavascriptData.NavigatorMsDoNotTrack error: "+e)}try{i["d7d1c702-f8bb-e311-be87-089e010f73f9"]=null!=navigator.javaEnabled()?navigator.javaEnabled():"undefined"}catch(e){TrustevLogger.LogMessage("Error in JavascriptData.NavigatorJavaEnabled error: "+e)}try{i["d8d1c702-f8bb-e311-be87-089e010f73f9"]=null!=navigator.cookieEnabled?navigator.cookieEnabled:"undefined"}catch(e){TrustevLogger.LogMessage("Error in JavascriptData.NavigatorCookieEnabled error: "+e)}try{i["d8406055-0ab1-e311-beb3-089e010f7621"]=null!=navigator.userAgent?navigator.userAgent:"undefined"}catch(e){TrustevLogger.LogMessage("Error in JavascriptData.NavigatorUserAgent error: "+e)}try{i["b886f45f-0ab1-e311-beb3-089e010f7621"]=null!=navigator.appName?navigator.appName:"undefined"}catch(e){TrustevLogger.LogMessage("Error in JavascriptData.NavigatorAppName error: "+e)}try{for(var e=[],r=navigator.plugins,t=0;r[t];++t){var o={};o.name=r[t].name,o.description=r[t].description,o.filename=r[t].filename,o.length=r[t].length,e.push(o)}i["c5f0baba-92b6-e311-beb6-089e010f7621"]=JSON.stringify(e)}catch(e){TrustevLogger.LogMessage("Error in JavascriptData.NavigatorPlugins error: "+e)}try{i["0e96e122-00bc-e311-be87-089e010f73f9"]=null!=screen.width?screen.width:"undefined"}catch(e){TrustevLogger.LogMessage("Error in JSDisplayData.ScreenWidth error: "+e)}try{i["0f96e122-00bc-e311-be87-089e010f73f9"]=null!=screen.height?screen.height:"undefined"}catch(e){TrustevLogger.LogMessage("Error in JSDisplayData.ScreenHeight error: "+e)}try{i["1096e122-00bc-e311-be87-089e010f73f9"]=null!=screen.availWidth?screen.availWidth:"undefined"}catch(e){TrustevLogger.LogMessage("Error in JSDisplayData.ScreenAvailWidth error: "+e)}try{i["1196e122-00bc-e311-be87-089e010f73f9"]=null!=screen.availHeight?screen.availHeight:"undefined"}catch(e){TrustevLogger.LogMessage("Error in JSDisplayData.ScreenAvailHeight error: "+e)}try{i["1296e122-00bc-e311-be87-089e010f73f9"]=null!=screen.colorDepth?screen.colorDepth:"undefined"}catch(e){TrustevLogger.LogMessage("Error in JSDisplayData.ScreenColorDepth error: "+e)}try{i["1396e122-00bc-e311-be87-089e010f73f9"]=null!=screen.pixelDepth?screen.pixelDepth:"undefined"}catch(e){TrustevLogger.LogMessage("Error in JSDisplayData.ScreenPixelDepth error: "+e)}try{i["1496e122-00bc-e311-be87-089e010f73f9"]=null!=screen.fontSmoothingEnabled?screen.fontSmoothingEnabled:"undefined"}catch(e){TrustevLogger.LogMessage("Error in JSDisplayData.ScreenFontSmoothingEnabled error: "+e)}try{i["1596e122-00bc-e311-be87-089e010f73f9"]=null!=screen.bufferDepth?screen.bufferDepth:"undefined"}catch(e){TrustevLogger.LogMessage("Error in JSDisplayData.ScreenBufferDepth error: "+e)}try{i["1696e122-00bc-e311-be87-089e010f73f9"]=null!=screen.deviceXDPI?screen.deviceXDPI:"undefined"}catch(e){TrustevLogger.LogMessage("Error in JSDisplayData.ScreenDeviceXDPI error: "+e)}try{i["1796e122-00bc-e311-be87-089e010f73f9"]=null!=screen.deviceYDPI?screen.deviceYDPI:"undefined"}catch(e){TrustevLogger.LogMessage("Error in JSDisplayData.ScreenDeviceYDPI error: "+e)}try{i["1996e122-00bc-e311-be87-089e010f73f9"]=null!=screen.logicalXDPI?screen.logicalXDPI:"undefined"}catch(e){TrustevLogger.LogMessage("Error in JSDisplayData.ScreenLogicalXDPI error: "+e)}try{i["1a96e122-00bc-e311-be87-089e010f73f9"]=null!=screen.logicalYDPI?screen.logicalYDPI:"undefined"}catch(e){TrustevLogger.LogMessage("Error in JSDisplayData.ScreenLogicalYDPI error: "+e)}try{i["1b96e122-00bc-e311-be87-089e010f73f9"]=null!=screen.systemXDPI?screen.systemXDPI:"undefined"}catch(e){TrustevLogger.LogMessage("Error in JSDisplayData.ScreenSystemXDPI error: "+e)}try{i["1c96e122-00bc-e311-be87-089e010f73f9"]=null!=screen.systemYDPI?screen.systemYDPI:"undefined"}catch(e){TrustevLogger.LogMessage("Error in JSDisplayData.ScreenSystemYDPI error: "+e)}try{i["1d96e122-00bc-e311-be87-089e010f73f9"]=null!=screen.updateInterval?screen.updateInterval:"undefined"}catch(e){TrustevLogger.LogMessage("Error in JSDisplayData.ScreenUpdateInterval error: "+e)}try{i["1e96e122-00bc-e311-be87-089e010f73f9"]=null!=window.devicePixelRatio?window.devicePixelRatio:"undefined"}catch(e){TrustevLogger.LogMessage("Error in JSDisplayData.WindowDevicePixelRatio error: "+e)}try{i["1f96e122-00bc-e311-be87-089e010f73f9"]=null!=window.outerWidth?window.outerWidth:"undefined"}catch(e){TrustevLogger.LogMessage("Error in JSDisplayData.WindowOuterWidth error: "+e)}try{i["2096e122-00bc-e311-be87-089e010f73f9"]=null!=window.outerHeight?window.outerHeight:"undefined"}catch(e){TrustevLogger.LogMessage("Error in JSDisplayData.WindowOuterHeight error: "+e)}try{i["2196e122-00bc-e311-be87-089e010f73f9"]=null!=window.innerWidth?window.innerWidth:"undefined"}catch(e){TrustevLogger.LogMessage("Error in JSDisplayData.WindowInnerWidth error: "+e)}try{i["2296e122-00bc-e311-be87-089e010f73f9"]=null!=window.innerHeight?window.innerHeight:"undefined"}catch(e){TrustevLogger.LogMessage("Error in JSDisplayData.WindowInnerHeight error: "+e)}try{i["2396e122-00bc-e311-be87-089e010f73f9"]=null!=window.screenX?window.screenX:"undefined"}catch(e){TrustevLogger.LogMessage("Error in JSDisplayData.WindowScreenX error: "+e)}try{i["2496e122-00bc-e311-be87-089e010f73f9"]=null!=window.screenY?window.screenY:"undefined"}catch(e){TrustevLogger.LogMessage("Error in JSDisplayData.WindowScreenY error: "+e)}try{i["2596e122-00bc-e311-be87-089e010f73f9"]=null!=window.screenTop?window.screenTop:"undefined"}catch(e){TrustevLogger.LogMessage("Error in JSDisplayData.WindowScreenTop error: "+e)}try{i["2696e122-00bc-e311-be87-089e010f73f9"]=null!=window.screenLeft?window.screenLeft:"undefined"}catch(e){TrustevLogger.LogMessage("Error in JSDisplayData.WindowScreenLeft error: "+e)}try{i["2796e122-00bc-e311-be87-089e010f73f9"]=null!=document.documentElement.clientWidth?document.documentElement.clientWidth:"undefined"}catch(e){TrustevLogger.LogMessage("Error in JSDisplayData.DocumentDocumentElementClientWidth error: "+e)}try{i["2896e122-00bc-e311-be87-089e010f73f9"]=null!=document.documentElement.clientHeight?document.documentElement.clientHeight:"undefined"}catch(e){TrustevLogger.LogMessage("Error in JSDisplayData.DocumentDocumentElementClientHeight error: "+e)}TrustevApiClient.CallAPI("POST",s+"/device",JSON.stringify(i),function(e,r){if(void 0!==a)return a(e,r);var t;TrustevV2.SetCookie("tsid-"+ConfigManager.PublicKey,n,20),t=[n],(c["deviceInfoCollected"]||function(){}).apply(void 0,t)})},SessionId:function(){if("NotSet"!==n&&""!==n)return n;if(""===ConfigManager.PublicKey||"NotSet"===ConfigManager.PublicKey){var e=t();if(!e.hasOwnProperty("key"))return;ConfigManager.PublicKey=e.key}if("NotSet"===(n=u("tsid-"+ConfigManager.PublicKey))||""===n){TrustevLogger.LogMessage("TrustevV2-Init : No sessionId found so calling /session endpoint");try{var r=null;window.XMLHttpRequest?r=new XMLHttpRequest:window.ActiveXObject&&(r=new ActiveXObject("Microsoft.XMLHTTP")),r&&(r.open("POST",s+"/session",!1),r.setRequestHeader("X-PublicKey",ConfigManager.PublicKey),r.setRequestHeader("Content-Type","application/json"),r.send("{}"),200===r.status&&(n=JSON.parse(r.responseText).SessionId,a=n,l("tsid-"+ConfigManager.PublicKey,n,20)))}catch(e){TrustevLogger.LogMessage("TrustevV2-Init : Error on calling the /session endpoint")}}return n}(),DeviceId:i.DeviceId||a,LocationServices:{UpdateSessionPosition:function(e){var r={SessionId:TrustevV2.SessionId,Latitude:e.coords.latitude,Longitude:e.coords.longitude};TrustevApiClient.CallAPI("POST",s+"/location",JSON.stringify(r),function(){})},GetHtml5Location:function(){navigator.geolocation?navigator.geolocation.getCurrentPosition(this.UpdateSessionPosition):TrustevLogger.LogMessage("Geolocation is not supported by this browser.")},CallEvUrl:function(e){var r=document.createElement("img");r.src=e,document.getElementsByTagName("head")[0].appendChild(r)}},PassiveAuthComplete:function(e){var r=document.createElement("img");r.src=e,document.getElementsByTagName("head")[0].appendChild(r)},On:function(e,r){c[e]=r},GetJsUrlParams:t()}}(),TrustevApiClient=TrustevApiClient||{CallAPI:function(e,r,t,a,o){try{var n=null;if(window.XMLHttpRequest?n=new XMLHttpRequest:window.ActiveXObject&&(n=new ActiveXObject("Microsoft.XMLHTTP")),n){if(n.onreadystatechange=function(){n.readyState==XMLHttpRequest.DONE&&a.apply(this,[n,t])},n.open(e,r,!0),null!=o)for(var i in o)o.hasOwnProperty(i)&&n.setRequestHeader(i,o[i]);else n.setRequestHeader("X-PublicKey",ConfigManager.PublicKey),n.setRequestHeader("Content-Type","application/json");"GET"===e?n.send():n.send(t)}}catch(e){TrustevLogger.LogMessage("Error on CallAPI - TrustevApiClient: "+e)}}},EvercookieManager=EvercookieManager||(_selectedStorageManagers=[],_trustevApiClient=null,_sessionId=null,_isInitiated=!1,_queuedEvercookies=[],_completeManagerCount=0,_gatherEvercookieCallback=null,_gatheredEvercookies=[],{Init:function(e,r){_selectedStorageManagers=e,_trustevApiClient=r,_isInitiated=!0},SetSessionId:function(e){if(_sessionId=e,TrustevLogger.LogMessage("EvercookieManager-SetSessionId : Setting SessionId : "+e),0<_queuedEvercookies.length)for(var r=0;r<_queuedEvercookies.length;r++)this.SendEvercookieToApi(_queuedEvercookies[r],this.TrustevApiCallback);if(0<_completeManagerCount&&_completeManagerCount===_selectedStorageManagers.length){var t={source:"init"};t.id=_sessionId,this.SendEvercookieToApi(t,this.TrustevApiCallback)}},GatherEvercookiesAndSendToApi:function(e,r){_gatherEvercookieCallback=r;var t=this;if(!_isInitiated)throw"You need to Init DeviceTagManager before executing";for(var a=0;a<_selectedStorageManagers.length;a++)_selectedStorageManagers[a].Get(e,function(e){if(e.id)TrustevLogger.LogMessage("EvercookieManager-GatherEvercookiesAndSendToApi : Storage manager returned cookie : "+JSON.stringify(e)),_gatheredEvercookies.push(e),_sessionId?t.SendEvercookieToApi(e,t.TrustevApiCallback):_queuedEvercookies.push(e);else if(_completeManagerCount+=1,_completeManagerCount===_selectedStorageManagers.length&&_sessionId){var r={source:"init"};r.id=_sessionId,t.SendEvercookieToApi(r,t.TrustevApiCallback)}})},SetMostAccurateEvercookie:function(e,r,t){var a=!1,o=!1;if(r&&0<r.length)for(var n=0;n<r.length;n++)if(r[n].id&&(a=!0,1!==r[n].source.indexOf("iframe-"))){TrustevLogger.LogMessage("EvercookieManager-SetMostAccurateEvercookie : Found an iframe evercookie so setting that. Evercookie : "+JSON.stringify(r[n]));for(var i=0;i<_selectedStorageManagers.length;i++)_selectedStorageManagers[i].Set(e,r[n].id);o=!0;break}if(a&&!o)for(var s=0;s<r.length;s++)if(r[s].id){TrustevLogger.LogMessage("EvercookieManager-SetMostAccurateEvercookie : Didnt find an iframe evercookie so using local domain one. Evercookie : "+JSON.stringify(r[s]));for(var c=0;c<_selectedStorageManagers.length;c++)_selectedStorageManagers[c].Set(e,r[s].id)}if(!a)for(var g=0;g<_selectedStorageManagers.length;g++)TrustevLogger.LogMessage("EvercookieManager-SetMostAccurateEvercookie : Didnt find any evercookies, so going to use sessionId : "+JSON.stringify(_sessionId)),_selectedStorageManagers[g].Set(e,_sessionId);t&&t()},TrustevApiCallback:function(){_completeManagerCount+=1,_completeManagerCount>=_selectedStorageManagers.length&&_gatherEvercookieCallback&&_gatherEvercookieCallback(_gatheredEvercookies)},SendEvercookieToApi:function(e,r){var t={};t.EvercookieId=e.id,t.EvercookieSource=e.source,t.SessionId=_sessionId,t.DeviceId=_sessionId,TrustevLogger.LogMessage("EvercookieManager-SendEvercookieToApi : Sending a cookie to API : "+JSON.stringify(e)),_trustevApiClient.CallAPI("POST",ConfigManager.BaseUrl+"/device",JSON.stringify(t),r)}}),SessionStorageManager=SessionStorageManager||function(){var o=null;try{o=window.sessionStorage}catch(e){TrustevLogger.LogMessage("sessionStorage - error: "+e.message+"; "+e.description)}return null!==o?{Get:function(e,r){var t={source:"sessionstorage"};try{if(o){var a=o.getItem(e);null!=a&&(t.id=a)}}catch(e){TrustevLogger.LogMessage("evercookie_session_storage - error: "+e.message+"; "+e.description)}r(t)},Set:function(e,r,t){o.setItem(e,r),t&&t()}}:null}(),LocalStorageManager=LocalStorageManager||function(){var o=null;try{o=window.localStorage}catch(e){TrustevLogger.LogMessage("localStorage - error: "+e.message+"; "+e.description)}if(null!==o)return{Get:function(e,r){var t={source:"localstorage"};try{if(o){var a=o.getItem(e);null!=a&&(t.id=a)}}catch(e){TrustevLogger.LogMessage("evercookie_local_storage - error: "+e.message+"; "+e.description)}r(t)},Set:function(e,r,t){o.setItem(e,r),t&&t()}}}(),GlobalStorageManager=GlobalStorageManager||(globalStorage=window.globalStorage,host=window.location.host.replace(/:\d+/,""),{Get:function(e,r){var t={source:"globalstorage"};if(globalStorage){globalStorageEvercookie.id="h1";var a=globalStorage[host][e];null!=a&&(t.id=a)}r(t)},Set:function(e,r,t){globalStorage&&(globalStorage[host][e]=r),t&&t()}}),IndexDbStorageManager=IndexDbStorageManager||(indexDbStorageEvercookie={source:"indexdb"},{Get:function(a,o){try{if("indexedDB"in window||(indexedDB=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB,IDBTransaction=window.IDBTransaction||window.webkitIDBTransaction||window.msIDBTransaction,IDBKeyRange=window.IDBKeyRange||window.webkitIDBKeyRange||window.msIDBKeyRange),indexedDB){var e=indexedDB.open("idb_evercookie",1);e.onerror=function(e){TrustevLogger.LogMessage("evercookie_indexdb_storage - error: "+e),o(indexDbStorageEvercookie)},e.onupgradeneeded=function(e){e.target.result.createObjectStore("evercookie",{keyPath:"name",unique:!1})},e.onsuccess=function(e){var r=e.target.result;if(r.objectStoreNames.contains("evercookie")){var t=r.transaction(["evercookie"],"readwrite").objectStore("evercookie").get(a);t.onsuccess=function(e){if(void 0!==t.result){var r=t.result.value;null!=r&&(indexDbStorageEvercookie.id=r)}o(indexDbStorageEvercookie)}}r.close()}}else o(indexDbStorageEvercookie)}catch(e){TrustevLogger.LogMessage("evercookie_indexdb_storage - error: "+err),o(indexDbStorageEvercookie)}},Set:function(t,a,o){try{if(indexedDB){var e=indexedDB.open("idb_evercookie",1);e.onerror=function(e){TrustevLogger.LogMessage("evercookie_indexdb_storage - error: "+e),o&&o()},e.onupgradeneeded=function(e){e.target.result.createObjectStore("evercookie",{keyPath:"name",unique:!1}),o&&o()},e.onsuccess=function(e){var r=e.target.result;r.objectStoreNames.contains("evercookie")&&r.transaction(["evercookie"],"readwrite").objectStore("evercookie").put({name:t,value:a}),r.close(),o&&o()}}else o&&o()}catch(e){TrustevLogger.LogMessage("evercookie_indexdb_storage - error: "+err),o&&o()}}}),DatabaseStorageManager=DatabaseStorageManager||(databaseStorageEvercookie={source:"databasestorage"},database=null,{Get:function(r,a){window.openDatabase?(database||(database=window.openDatabase("etrust","",r,1048576)),database.transaction(function(e){e.executeSql("SELECT value FROM cache WHERE name=?",[r],function(e,r){if(1<=r.rows.length){var t=r.rows.item(0).value;null!=t&&(databaseStorageEvercookie.id=t)}a(databaseStorageEvercookie)},function(e,r){TrustevLogger.LogMessage("evercookie_database_storage - error: "+r),a(databaseStorageEvercookie)})})):a(databaseStorageEvercookie)},Set:function(r,t,e){window.openDatabase&&(database||(database=window.openDatabase("etrust","",r,1048576)),database.transaction(function(e){e.executeSql("CREATE TABLE IF NOT EXISTS cache(id INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT, name TEXT NOT NULL, value TEXT NOT NULL, UNIQUE (name))",[],function(e,r){},function(e,r){}),e.executeSql("INSERT OR REPLACE INTO cache(name, value) VALUES(?, ?)",[r,t],function(e,r){},function(e,r){})})),e&&e()}}),QuickStorageManager=QuickStorageManager||(quickStorageManagers=[LocalStorageManager,SessionStorageManager,GlobalStorageManager],{Get:function(e,r){for(var t=0,a=!1,o=0;o<quickStorageManagers.length;o++)quickStorageManagers[o].Get(e,function(e){e.id&&!a&&(a=!0,r(e)),++t==quickStorageManagers.length&&(a||r(e),a=!1)})},Set:function(e,r,t){for(var a=0,o=0;o<quickStorageManagers.length;o++)quickStorageManagers[o].Set(e,r,function(e){++a===quickStorageManagers.length&&t&&t()})}}),IFrameStorageManager=IFrameStorageManager||(iframe=null,loadIFrame=function(e){iframe=document.createElement("iframe"),iframe.setAttribute("src",ConfigManager.CdnUrl+"/trustevIFrame.html"),iframe.style.display="none",document.body.appendChild(iframe),iframe.onload=function(){IFrameMessageManager.Init(window,"message"),e()}},{Get:function(e,r){var t={type:"IFrame_Evercookie_Get_Init"};t.evercookieIdKey=e,iframe?IFrameMessageManager.Send(iframe,t,function(e){e.source="iframe-"+e.source,TrustevLogger.LogMessage("IFrameStorageManager-Get : Found IFrame evercookie : "+JSON.stringify(e)),r(e)}):loadIFrame(function(){IFrameMessageManager.Send(iframe,t,function(e){e.source="iframe-"+e.source,TrustevLogger.LogMessage("IFrameStorageManager-Get : Found IFrame evercookie : "+JSON.stringify(e)),r(e)})})},Set:function(e,r,t){var a={type:"IFrame_Evercookie_Set_Init"};a.evercookieIdKey=e,a.evercookieId=r,TrustevLogger.LogMessage("Setting IFrame evercookie : Key "+e+", Id : "+r),iframe?IFrameMessageManager.Send(iframe,a,t):loadIFrame(function(){IFrameMessageManager.Send(iframe,a,t)})}}),IFrameMessageManager=IFrameMessageManager||(messageIdentifier="TrustevIFrameMessage",currentMessageCallBack=null,iFrameListener=function(e){if(e.data&&"TrustevIFrameMessage"===e.data.identifier)switch(e.data.type){case"IFrame_Evercookie_Get_Result":currentMessageCallBack&&currentMessageCallBack(e.data.evercookie);break;case"IFrame_Evercookie_Set_Result":currentMessageCallBack&&currentMessageCallBack();break;default:TrustevLogger.LogMessage("Unrecognized iframe message type")}},{Init:function(e,r,t){"addEventListener"in e?e.addEventListener(r,iFrameListener,!1):"attachEvent"in e&&e.attachEvent("on"+r,iFrameListener)},Send:function(e,r,t){currentMessageCallBack=t,r.identifier=messageIdentifier,e.contentWindow.postMessage(r,"*")}});!function e(){if(void 0!==TrustevV2){var r=TrustevV2.GetJsUrlParams;r.hasOwnProperty("key")&&TrustevV2.Init(r.key,function(){})}else setTimeout(e,50)}();